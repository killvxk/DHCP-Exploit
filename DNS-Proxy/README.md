### DNS Proxy

DNS proxy listens for incoming DNS requests on the local interface and
resolves remote hosts using either of:

        1. Check for a local cached/spoofed entry in config file OR
        
        2. Resolve the domain name locally

The original DNS proxy code has been modified as above as a simple solution to cache/spoof domain IP.
Source code is hosted on https://github.com/nabinthomas/DHCP-Exploit/tree/master/DNS-Proxy/
The ORIGINAL source code is hosted on [GitHub](https://github.com/andreafabrizi/DNSProxy/)


### Build
# quick steps:
`setup-dnsproxy.sh`

# Detailed  build steps:
For debian/ubuntu users:
`apt-get install libcurl4-openssl-dev`

then

`make`

### Usage

```bash
dnsp -l 127.0.0.1 -c <hostname config file>
```
DNS proxy listens on port 53 (bind on 127.0.0.1) and resolves the hostname as:
        1. Check for a local cached/spoofed entry in config file OR
        2. Resolve the domain name locally 

```bash
 usage: dnsp -l [local_host] -c [host config file] 

 OPTIONS:
      -v         Enable DEBUG mode
      -p                 Local port
      -l                 Local host
      -c                 Hostname to IP config/mapper file
```
## Testing
Try to resolve an hostname using the **dig** command:

```bash
dig www.google.com @127.0.0.1
```

The result must be something like this:
; <<>> DiG 9.11.4-2-Debian <<>> google.com @127.0.0.1
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 49775
;; flags: qr aa rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;google.com.                    IN      A

;; ANSWER SECTION:
google.com.             3600    IN      A       1.2.3.4

;; Query time: 28 msec
;; SERVER: 127.0.0.1#53(127.0.0.1)
;; WHEN: Wed Oct 03 01:49:09 EDT 2018
;; MSG SIZE  rcvd: 44

